!function(){"use strict";class e{constructor(e){e&&Object.assign(this,e)}getFormatedPrice(){return(this.price/100).toFixed(2)+" €"}setTeddyURL(e){e.searchParams.set("id",this._id)}createPreview(e){document.querySelector(".teddyList").innerHTML+=`<a href="${e}" class="teddyList__item card shadow mb-3">\n                                                                <img alt="ours en peluche" src=${this.imageUrl}>\n                                                                <div class="card-body pb-1">\n                                                                    <h3 class="h5">${this.name}</h3>\n                                                                    <p>${this.getFormatedPrice()}</p>\n                                                                </div>\n                                                            </a>\n                                                            `}createDescription(){document.querySelector(".teddyPage").innerHTML+=`<img src="${this.imageUrl}" alt="ours en peluche">\n                                                                    <div class="card-body">\n                                                                        <h1 class="h2">${this.name}</h1>\n                                                                        <p class="h5">Prix: <span class="text-secondary">${this.getFormatedPrice()}</span></p>\n                                                                        <p>Nos prix incluent la TVA</p>\n                                                                        <strong>Description de l'article</strong>\n                                                                        <p>${this.description}</p>\n                                                                        <select name="colorSelect" class="teddyPage__colorSelect">\n                                                                        \n                                                                        </select>\n                                                                        <button class="btn--addToCart btn-primary">Ajouter au panier</button>\n                                                                    </div>`;for(let e of this.colors)document.querySelector(".teddyPage__colorSelect").innerHTML+="<option>"+e+"</option>"}createCartItem(){document.querySelector(".teddyCart").innerHTML+=`<div class="teddyCart__item card d-flex flex-row mb-2">\n                                                                    <img src="${this.imageUrl}" alt="ours en peluche">\n                                                                    <div class='d-flex card-body flex-row justify-content-between'>\n                                                                        <div>\n                                                                            <p class='h3'>${this.name}</p>\n                                                                        </div>\n                                                                        <p class="teddyCart__itemPrice text-secondary h5">${this.getFormatedPrice()}</p>\n                                                                    </div>\n                                                                </div>`}}function t(){let e=localStorage.getItem("cartList");return null==e?[]:JSON.parse(e)}class r{constructor(e,t,r,n,i){this.firstName=e,this.lastName=t,this.address=r,this.city=n,this.email=i}}let n=t(),i=0;function o(){var e=!0;for(let t of document.querySelectorAll(".form input")){if(!(e&=t.reportValidity())){t.classList.remove("is-valid"),t.classList.add("is-invalid");break}t.classList.remove("is-invalid"),t.classList.add("is-valid")}if(e)return!0}document.querySelector(".itemCount").innerText=t().length,n.length>0?(function(){for(let t of n)fetch("http://localhost:3000/api/teddies/"+t).then((e=>e.json())).then((t=>{let r=new e(t);r.createCartItem(),i+=r.price,document.querySelector(".teddyCart__sum").innerHTML=(i/100).toFixed(2)+" €"}))}(),document.querySelector(".btn--order").addEventListener("click",(function(){if(o(),o()){let e={contact:new r(document.getElementById("firstName").value,document.getElementById("lastName").value,document.getElementById("address").value,document.getElementById("city").value,document.getElementById("email").value),products:n};fetch("http://localhost:3000/api/teddies/order",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json()})).then((function(e){localStorage.setItem("orderID",e.orderId),localStorage.setItem("itemSum",i),localStorage.setItem("name",e.contact.firstName),localStorage.setItem("email",e.contact.email),localStorage.removeItem("cartList"),location.assign("confirmation.html")})).catch((function(e){console.error(e)}))}}))):function(){for(let e of document.querySelectorAll(".form input"))e.disabled=!0,document.querySelector(".btn--order").classList.replace("btn-primary","btn-outline-primary"),document.querySelector(".btn--order").setAttribute("value","Votre panier est vide !")}()}();